<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Radio Coravox ‚Ä¢ Panel de Control</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:system-ui,-apple-system,Roboto,sans-serif;
  background:#0b0b0b;
  color:#fff;
  padding:16px;
}
.wrap{max-width:980px;margin:0 auto}
h1{color:#f5c85b;margin-bottom:14px}
.card{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(245,200,91,.18);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
.row{display:flex;gap:10px;flex-wrap:wrap}
.col{flex:1;min-width:220px}
label{font-size:12px;opacity:.8}
input,textarea{
  width:100%;
  padding:10px;
  border-radius:10px;
  background:#000;
  border:1px solid rgba(245,200,91,.3);
  color:#f5c85b;
}
button{
  padding:10px 14px;
  border-radius:10px;
  border:none;
  background:#f5c85b;
  font-weight:900;
  cursor:pointer;
}
button.danger{background:#ff5c5c}
.muted{opacity:.7;font-size:12px}
</style>
</head>

<body>
<div class="wrap">
<h1>üéõÔ∏è Panel de Control ‚Äì Radio Coravox</h1>

<div class="card">
  <h3>üîê Acceso Admin</h3>
  <div class="row">
    <div class="col">
      <label>Email</label>
      <input id="email" value="vis-party@hotmail.com">
    </div>
    <div class="col">
      <label>Password</label>
      <input id="pass" type="party212429">
    </div>
    <div class="col">
      <label>&nbsp;</label>
      <button id="login">Entrar</button>
    </div>
  </div>
  <div class="muted" id="authState">No conectado</div>
</div>

<div class="card" id="panel" style="display:none">
  <h3>‚öôÔ∏è Global</h3>
  <button id="resetFans" class="danger">Reset TOP FANS</button>
  <button id="clearChat" class="danger">Clear Chat</button>
  <div class="muted" id="toolMsg"></div>
</div>

</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyC8jq2iODj6DwfTSktgZ7ia84oeMxxPjNE",
  authDomain: "coravox-602a0.firebaseapp.com",
  projectId: "coravox-602a0"
});

const auth=firebase.auth();
const db=firebase.firestore();

const authState=document.getElementById("authState");
const panel=document.getElementById("panel");
const toolMsg=document.getElementById("toolMsg");

document.getElementById("login").onclick=()=>{
  auth.signInWithEmailAndPassword(
    email.value.trim(),
    pass.value
  ).catch(e=>{
  authState.textContent = "ERROR: " + (e.code || "") + " ‚Äî " + (e.message || e);
});

auth.onAuthStateChanged(u=>{
  if(!u){
    authState.textContent="No conectado";
    panel.style.display="none";
    return;
  }
  authState.textContent="Conectado ‚úî";
  panel.style.display="block";
});

async function clearCollection(ref){
  const snap=await ref.limit(400).get();
  const b=db.batch();
  snap.docs.forEach(d=>b.delete(d.ref));
  await b.commit();
  return snap.size;
}

resetFans.onclick=async()=>{
  toolMsg.textContent="Reseteando...";
  const n=await clearCollection(db.collection("likes-ranking"));
  toolMsg.textContent="Top Fans borrados: "+n;
};

clearChat.onclick=async()=>{
  toolMsg.textContent="Limpiando chat...";
  const n=await clearCollection(db.collection("mensajes-chat"));
  toolMsg.textContent="Chat borrado: "+n;
};
</script>
</body>
</html>
